import re

enabled = True

def multiply(row):
    global enabled
    
    pattern = r"mul\((\d{1,3}),(\d{1,3})\)"
    do_pattern = r"do\(\)(?:(?!don't\(\)).)*?" + pattern
    
    
    
    all_mul = re.findall(do_pattern, row)
    
    

    return sum(int(x) * int(y) for x, y in all_mul)


with open("day3/test2.txt") as file:
    tot = 0
    for row in file:
        tot += multiply(row)
    
    print(tot)
        
    